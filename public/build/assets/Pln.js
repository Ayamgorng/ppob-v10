import{r as s,j as a,a as I,y as k}from"./app.js";import{A as E,B as h}from"./AuthenticatedLayout.js";import{C as M}from"./Card.js";import{T}from"./TextInput.js";import{P as A}from"./PrimaryButton.js";import B from"./Product.js";import{a as V}from"./BaseHelper.js";import"./clsx.js";import"./ApplicationLogo.js";import"./transition.js";function J({data:g,category:j,products:C}){const[r,d]=s.useState(""),[N,b]=s.useState(!1),[w,y]=s.useState(""),[o,m]=s.useState(!1),[i,n]=s.useState(0),P=async()=>{var t,c,u,p,x,f;m(!0);const e=await I.post("/transaction/prepaid",{id_product:i,id_customer:r});if((c=(t=e==null?void 0:e.data)==null?void 0:t.data)!=null&&c.id){h.success(e.data.message),n(0),d(""),k.get(`/history/${(p=(u=e==null?void 0:e.data)==null?void 0:u.data)==null?void 0:p.id}`);return}else(x=e.data)!=null&&x.message&&h.error((f=e.data)==null?void 0:f.message);m(!1)},l=(e,t)=>{n(t),d(e),b(e.length>=10&&t>0)},S=e=>{const t=V(e);y(t.length<10?"Number too short, minimim 11 number":""),l(t,i)},v=e=>{l(r,e.id)};return a.jsx(E,{data:g,title:"Transaction",children:a.jsxs(M,{className:"flex flex-col px-10 gap-y-3 py-3",children:[a.jsx("h3",{className:"text-3xl font-medium mb-5 dark:text-white",children:j.name}),a.jsx(T,{title:"Meter Number",disabled:o,value:r,errorMessage:w,isFocused:!0,onChange:e=>S(e.target.value),className:"w-full md:w-1/3"}),a.jsx("label",{className:"dark:text-white",children:"Nominal"}),a.jsx("div",{className:"flex-wrap inline-flex min-w-full gap-8 max-h-96 overflow-y-auto rounded-sm",children:C.sort((e,t)=>e.price-t.price).map((e,t)=>a.jsx(B,{data:e,idProduct:i,onClick:()=>e.status&&v(e)},t))}),a.jsx("div",{className:"w-full text-right my-5",children:a.jsx(A,{loading:o,disabled:!N||o,onClick:()=>P(),children:"Process"})})]})})}export{J as default};
