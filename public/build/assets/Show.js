import{r as o,j as e,y as j}from"./app.js";import{A as b}from"./AuthenticatedLayout.js";import{C as u}from"./Card.js";import{c as l}from"./clsx.js";import{l as v,f as w,r as N}from"./BaseHelper.js";import{D as y,a as i}from"./deposit.js";import{T as k}from"./TextInput.js";import{I as D}from"./ImagePreview.js";import{A as S}from"./Api.js";import"./react-toastify.esm.js";import"./ApplicationLogo.js";import"./transition.js";const c=({label:s,value:a,align:t="text-left"})=>e.jsxs("div",{className:l("p-2",t),children:[e.jsx("div",{className:"dark:text-white leading-8",children:s}),e.jsx("div",{className:"text-xl font-semibold dark:text-white inline-flex",children:a})]}),p=({label:s,loading:a,className:t="",...r})=>e.jsx("button",{disabled:a,...r,className:l("w-full p-2 rounded-xl text-center text-white transition-all duration-300 disabled:opacity-50",t),children:a?"Loading...":s});function O({data:s,deposit:a}){const[t,r]=o.useState(!1),[d,h]=o.useState(""),f=m=>{h(m.target.files[0])},x=async m=>{if(r(!0),await S.put(`/admin/deposit/${a.id}`,{stat:m})){j.get("/admin/deposit");return}r(!1)};let n="";switch(typeof d){case"object":n=URL.createObjectURL(d);break;case"string":a.image&&(n=`/images/deposit/${a.image}`);break}const g=v[a.status];return e.jsxs(b,{data:s,children:[e.jsxs("div",{className:"text-3xl dark:text-white",children:["Deposit : ",a.id]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-y-5 gap-x-10",children:[e.jsxs(u,{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(c,{label:"Bank",value:a.bank}),e.jsxs("div",{className:"p-3 text-right",children:[e.jsx("div",{className:"dark:text-white",children:"Date"}),e.jsx("div",{className:"dark:text-white",children:w(a.created_at)})]})]}),e.jsx(c,{label:"Account Number",value:a.account_number}),e.jsx(c,{label:"Nominal",value:N(a.nominal)}),e.jsx(c,{label:"Status",value:e.jsx("div",{className:l("px-4 py-2 rounded-xl text-white",g.color),children:y[a.status]})}),[i.waiting_payment,i.waiting_approval].includes(a.status)&&e.jsxs("div",{className:"p-3 mt-5 flex gap-x-8 justify-between",children:[e.jsx(p,{label:"Cancel",loading:t,onClick:()=>x(i.failed),className:l("bg-red-500",!t&&"hover:bg-red-600")}),e.jsx(p,{label:"Approve",loading:t,onClick:()=>x(i.success),className:l("bg-green-500",!t&&"hover:bg-green-600")})]})]}),e.jsxs(u,{className:"px-4 py-3 flex flex-col",children:[e.jsx("div",{className:"dark:text-white mb-10 text-xl",children:"Upload Transfer Evidence"}),a.status==i.waiting_payment&&e.jsx(k,{type:"file",accept:"image/*",onChange:f,className:"w-full md:w-1/2 mb-2"}),e.jsx("div",{id:"galleryID",children:n&&e.jsx(D,{src:n,height:210})})]})]})]})}export{O as default};
